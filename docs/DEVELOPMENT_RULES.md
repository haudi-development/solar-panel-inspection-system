# 開発ルール

## 🔴 重要な開発ルール

### 1. テストとデバッグの徹底
**実装後は必ずテストを行い、デバッグが完了するまでは完了報告をしない**
```bash
# 必須チェック項目
npm run lint        # Lintエラーがないこと
npm run build       # ビルドが成功すること
npm run dev         # 開発サーバーでエラーがないこと
```

### 2. 指示の一度性
**同じ指示を何度も繰り返させない**
- 指示内容を正確に理解してから実装開始
- 不明点は実装前に確認
- 実装完了の定義を明確にする

### 3. ドキュメントの継続的更新
**仕様を随時/docs/にドキュメントとしてまとめる**
- 新機能追加時: README.md更新
- API変更時: api-specification.md更新
- 作業完了時: development-log.md更新

### 4. 開発状況の記録
**開発状況も都度まとめて、エージェントが切り替わってもすぐにキャッチアップできるようにする**
- current-status.mdを最新状態に保つ
- 未解決の問題は明記
- 次のステップを明確に記載

## 📋 開発フロー

### 新機能実装時
1. 要件を明確に理解
2. 影響範囲を確認
3. 実装
4. テスト（lint, build, 動作確認）
5. ドキュメント更新
6. コミット

### バグ修正時
1. 問題の再現
2. 原因特定
3. 修正実装
4. 回帰テスト
5. development-log.mdに記録

## 🛠 開発環境設定

### ポート設定
```bash
# 開発サーバーは必ずポート3000で起動
npm run dev  # http://localhost:3000
```

### 環境変数
```bash
# .env.local（必須）
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
```

## ✅ コミット前チェックリスト

### コード品質
- [ ] TypeScriptエラーなし（`npx tsc --noEmit`）
- [ ] ESLintエラーなし（`npm run lint`）
- [ ] ビルド成功（`npm run build`）
- [ ] console.logを削除
- [ ] 未使用のimportを削除

### 動作確認
- [ ] 開発サーバーで動作確認済み
- [ ] ブラウザコンソールにエラーなし
- [ ] レスポンシブデザイン確認済み

### ドキュメント
- [ ] 関連ドキュメント更新済み
- [ ] 開発ログに記録済み
- [ ] 次のステップが明確

## 🚫 禁止事項

1. **テストなしでのコミット**
2. **ドキュメントなしでの大規模変更**
3. **エラーハンドリングなしのAPI呼び出し**
4. **ハードコーディングされた値**（環境変数を使用）
5. **未使用のコードの放置**

## 📝 命名規則

### ファイル名
- コンポーネント: `PascalCase.tsx`
- ユーティリティ: `kebab-case.ts`
- 定数: `UPPER_SNAKE_CASE.ts`

### 変数・関数
- 変数: `camelCase`
- 定数: `UPPER_SNAKE_CASE`
- 関数: `camelCase`
- イベントハンドラ: `handleXxx`

### Git
- ブランチ: `feature/機能名` or `fix/バグ名`
- コミットメッセージ: 日本語可、簡潔に

## 🔄 定期メンテナンス

### 日次
- 開発ログの更新
- 未解決issueの確認

### 週次
- 依存関係の更新確認（`npm outdated`）
- ドキュメントの整合性確認
- パフォーマンス測定

## 📞 トラブルシューティング

### よくある問題と解決方法

#### ポート3000が使用中
```bash
# プロセス確認
lsof -i :3000
# 強制終了
kill -9 [PID]
```

#### ビルドエラー
```bash
# クリーンビルド
rm -rf .next
rm -rf node_modules
npm install
npm run build
```

#### Supabase接続エラー
1. 環境変数確認
2. ネットワーク確認
3. Supabaseダッシュボードでステータス確認

---
最終更新: 2025-08-25
次回レビュー予定: 新機能実装時